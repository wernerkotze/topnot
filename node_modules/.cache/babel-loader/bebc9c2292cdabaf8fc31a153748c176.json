{"remainingRequest":"/app/node_modules/babel-loader/lib/index.js!/app/src/store/modules/auth.js","dependencies":[{"path":"/app/src/store/modules/auth.js","mtime":1555223556000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1555006869000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport * as firebase from 'firebase';\nvar state = {\n  user: null,\n  loading: false,\n  error: null\n};\nvar getters = {\n  user: function user(state) {\n    return state.user;\n  },\n  loading: function loading(state) {\n    return state.loading;\n  },\n  error: function error(state) {\n    return state.error;\n  }\n};\nvar mutations = {\n  setUser: function setUser(state, payload) {\n    state.user = payload;\n  },\n  setLoading: function setLoading(state, payload) {\n    state.loading = payload;\n  },\n  setError: function setError(state, payload) {\n    state.error = payload;\n  },\n  clearError: function clearError(state) {\n    state.error = null;\n  }\n};\nvar actions = {\n  signUserUp: function signUserUp(_ref, payload) {\n    var commit = _ref.commit;\n    commit('setLoading', true);\n    commit('clearError');\n    firebase.auth().createUserWithEmailAndPassword(payload.email, payload.password).then(function (user) {\n      var ref = firebase.database().ref().child('/users/');\n      var data = {\n        email: payload.email,\n        id: user.user.uid\n      };\n      ref.child(user.user.uid).set(data).then(function (ref) {\n        (function (user) {\n          var newUser = {\n            id: user.user.uid\n          };\n          commit('setUser', newUser);\n        });\n      });\n    }).catch(function (error) {\n      commit('setLoading', false);\n      commit('setError', error);\n      console.log(error);\n    });\n  },\n  signUserIn: function signUserIn(_ref2, payload) {\n    var commit = _ref2.commit;\n    commit('setLoading', true);\n    commit('clearError');\n    firebase.auth().signInWithEmailAndPassword(payload.email, payload.password).then(function (user) {\n      commit('setLoading', false);\n      var newUser = {\n        id: user.user.uid\n      };\n      commit('setUser', newUser);\n    }).catch(function (error) {\n      commit('setLoading', false);\n      commit('setError', error);\n      console.log(error);\n    });\n  },\n  autoSignIn: function autoSignIn(_ref3, payload) {\n    var commit = _ref3.commit;\n    commit('setUser', {\n      id: payload.uid\n    });\n  },\n  clearError: function clearError(_ref4) {\n    var commit = _ref4.commit;\n    commit('clearError');\n  },\n  logout: function logout(_ref5) {\n    var commit = _ref5.commit;\n    firebase.auth().signOut();\n    commit('setUser', null);\n  }\n};\nexport default {\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions\n};",{"version":3,"sources":["/app/src/store/modules/auth.js"],"names":["axios","firebase","state","user","loading","error","getters","mutations","setUser","payload","setLoading","setError","clearError","actions","signUserUp","commit","auth","createUserWithEmailAndPassword","email","password","then","ref","database","child","data","id","uid","set","newUser","catch","console","log","signUserIn","signInWithEmailAndPassword","autoSignIn","logout","signOut"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport * as firebase from 'firebase'\n\nconst state = {\n  user: null,\n  loading: false,\n  error: null\n}\n\nconst getters = {\n  user (state) {\n    return state.user\n  },\n  loading (state) {\n    return state.loading\n  },\n  error (state) {\n    return state.error\n  }\n}\n\nconst mutations = {\n  setUser (state, payload) {\n    state.user = payload\n  },\n  setLoading (state, payload) {\n    state.loading = payload\n  },\n  setError (state, payload) {\n    state.error = payload\n  },\n  clearError (state) {\n    state.error = null\n  }\n}\n\nconst actions = {\n  signUserUp ({ commit }, payload) {\n    commit('setLoading', true)\n    commit('clearError')\n    firebase.auth().createUserWithEmailAndPassword(payload.email, payload.password)\n    .then(function(user) {\n      var ref = firebase.database().ref().child('/users/');\n      var data = {\n        email: payload.email,\n        id: user.user.uid\n      }\n      ref.child(user.user.uid).set(data).then(function(ref){\n        user => {\n          const newUser = {\n            id: user.user.uid\n          }\n          commit('setUser', newUser)\n        }\n      })\n    }\n    ).catch (\n      error => {\n        commit('setLoading', false)\n        commit('setError', error)\n        console.log(error)\n      }\n    )\n  },\n  signUserIn ({commit}, payload) {\n    commit('setLoading', true)\n    commit('clearError')\n    firebase.auth().signInWithEmailAndPassword(payload.email, payload.password)\n      .then(\n        user => {\n          commit('setLoading', false)\n          const newUser = {\n            id: user.user.uid\n          }\n          commit('setUser', newUser)\n        }\n      )\n      .catch(\n        error => {\n          commit('setLoading', false)\n          commit('setError', error)\n          console.log(error)\n        }\n      )\n  },\n  autoSignIn ({commit}, payload) {\n    commit('setUser', {id: payload.uid})\n  },\n  clearError ({commit}) {\n    commit('clearError')\n  },\n  logout ({commit}) {\n    firebase.auth().signOut()\n    commit('setUser', null)\n  },\n}\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n}\n"]}]}