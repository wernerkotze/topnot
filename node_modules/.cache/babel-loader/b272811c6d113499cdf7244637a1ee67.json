{"remainingRequest":"/Users/werner-dev/www/topnot-cli/node_modules/babel-loader/lib/index.js!/Users/werner-dev/www/topnot-cli/node_modules/eslint-loader/index.js??ref--13-0!/Users/werner-dev/www/topnot-cli/src/store/modules/auth.js","dependencies":[{"path":"/Users/werner-dev/www/topnot-cli/src/store/modules/auth.js","mtime":1556195413796},{"path":"/Users/werner-dev/www/topnot-cli/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/werner-dev/www/topnot-cli/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/werner-dev/www/topnot-cli/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import axios from 'axios';\nimport * as firebase from 'firebase';\nvar state = {\n  user: null,\n  loading: false,\n  error: null\n};\nvar getters = {\n  user: function user(state) {\n    return state.user;\n  },\n  loading: function loading(state) {\n    return state.loading;\n  },\n  error: function error(state) {\n    return state.error;\n  }\n};\nvar mutations = {\n  setUser: function setUser(state, payload) {\n    state.user = payload;\n  },\n  setLoading: function setLoading(state, payload) {\n    state.loading = payload;\n  },\n  setError: function setError(state, payload) {\n    state.error = payload;\n  },\n  clearError: function clearError(state) {\n    state.error = null;\n  }\n};\nvar actions = {\n  signUserUp: function signUserUp(_ref, payload) {\n    var commit = _ref.commit;\n    commit('setLoading', true);\n    commit('clearError');\n    firebase.auth().createUserWithEmailAndPassword(payload.email, payload.password).then(function (user) {\n      var ref = firebase.database().ref().child('/users/');\n      var data = {\n        email: payload.email,\n        id: user.user.uid\n      };\n      ref.child(user.user.uid).set(data).then(function (ref) {\n        (function (user) {\n          var newUser = {\n            id: user.user.uid\n          };\n          commit('setUser', newUser);\n        });\n      });\n    }).catch(function (error) {\n      commit('setLoading', false);\n      commit('setError', error);\n      console.log(error);\n    });\n  },\n  signUserIn: function signUserIn(_ref2, payload) {\n    var commit = _ref2.commit;\n    commit('setLoading', true);\n    commit('clearError');\n    firebase.auth().signInWithEmailAndPassword(payload.email, payload.password).then(function (user) {\n      commit('setLoading', false);\n      var newUser = {\n        id: user.user.uid\n      };\n      commit('setUser', newUser);\n    }).catch(function (error) {\n      commit('setLoading', false);\n      commit('setError', error);\n      console.log(error);\n    });\n  },\n  autoSignIn: function autoSignIn(_ref3, payload) {\n    var commit = _ref3.commit;\n    commit('setUser', {\n      id: payload.uid\n    });\n  },\n  clearError: function clearError(_ref4) {\n    var commit = _ref4.commit;\n    commit('clearError');\n  },\n  logout: function logout(_ref5) {\n    var commit = _ref5.commit;\n    firebase.auth().signOut();\n    commit('setUser', null);\n  }\n};\nexport default {\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions\n};",{"version":3,"sources":["/Users/werner-dev/www/topnot-cli/src/store/modules/auth.js"],"names":["axios","firebase","state","user","loading","error","getters","mutations","setUser","payload","setLoading","setError","clearError","actions","signUserUp","commit","auth","createUserWithEmailAndPassword","email","password","then","ref","database","child","data","id","uid","set","newUser","catch","console","log","signUserIn","signInWithEmailAndPassword","autoSignIn","logout","signOut"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport * as firebase from 'firebase'\n\nconst state = {\n  user: null,\n  loading: false,\n  error: null\n}\n\nconst getters = {\n  user (state) {\n    return state.user\n  },\n  loading (state) {\n    return state.loading\n  },\n  error (state) {\n    return state.error\n  }\n}\n\nconst mutations = {\n  setUser (state, payload) {\n    state.user = payload\n  },\n  setLoading (state, payload) {\n    state.loading = payload\n  },\n  setError (state, payload) {\n    state.error = payload\n  },\n  clearError (state) {\n    state.error = null\n  }\n}\n\nconst actions = {\n  signUserUp ({ commit }, payload) {\n    commit('setLoading', true)\n    commit('clearError')\n    firebase.auth().createUserWithEmailAndPassword(payload.email, payload.password)\n    .then(function(user) {\n      var ref = firebase.database().ref().child('/users/');\n      var data = {\n        email: payload.email,\n        id: user.user.uid\n      }\n      ref.child(user.user.uid).set(data).then(function(ref){\n        user => {\n          const newUser = {\n            id: user.user.uid\n          }\n          commit('setUser', newUser)\n        }\n      })\n    }\n    ).catch (\n      error => {\n        commit('setLoading', false)\n        commit('setError', error)\n        console.log(error)\n      }\n    )\n  },\n  signUserIn ({commit}, payload) {\n    commit('setLoading', true)\n    commit('clearError')\n    firebase.auth().signInWithEmailAndPassword(payload.email, payload.password)\n      .then(\n        user => {\n          commit('setLoading', false)\n          const newUser = {\n            id: user.user.uid\n          }\n          commit('setUser', newUser)\n        }\n      )\n      .catch(\n        error => {\n          commit('setLoading', false)\n          commit('setError', error)\n          console.log(error)\n        }\n      )\n  },\n  autoSignIn ({commit}, payload) {\n    commit('setUser', {id: payload.uid})\n  },\n  clearError ({commit}) {\n    commit('clearError')\n  },\n  logout ({commit}) {\n    firebase.auth().signOut()\n    commit('setUser', null)\n  },\n}\n\nexport default {\n  state,\n  getters,\n  mutations,\n  actions\n}\n"]}]}